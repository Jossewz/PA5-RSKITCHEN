<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestión de Platillos</title>
  <style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
    }

    header {
        background-color: #003366;
        color: white;
        padding: 10px;
        text-align: center;
    }

    h1, h2 {
        margin: 0;
    }

    main {
        padding: 20px;
    }

    .form-section, .platillos-list {
        margin: 20px 0;
        padding: 20px;
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    form input {
        display: block;
        width: 100%;
        margin: 10px 0;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
    }

    form button {
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 10px;
        border-radius: 4px;
        cursor: pointer;
    }

    form button:hover {
        background-color: #45a049;
    }

    #platillo-list {
        list-style-type: none;
        padding: 0;
    }

    #platillo-list li {
        padding: 10px;
        background-color: #fff;
        margin: 10px 0;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    button.edit, button.delete {
        margin-left: 10px;
        padding: 5px 10px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    button.edit {
        background-color: #ff9800;
        color: white;
    }

    button.delete {
        background-color: #f44336;
        color: white;
    }

    button.edit:hover {
        background-color: #e68900;
    }

    button.delete:hover {
        background-color: #e53935;
    }
  </style>
</head>
<body>
<header>
  <h1>Gestión de Platillos</h1>
</header>

<main>
  <section class="form-section">
    <h2>Crear Platillo</h2>
    <form id="create-form">
      <input type="text" id="name" placeholder="Nombre del platillo" required>
      <input type="number" id="price" placeholder="Precio" required>
      <input type="text" id="cant" placeholder="Cantidad disponible" required>
      <input type="text" id="ingredients" placeholder="Ingredientes (separados por coma)" required>
      <button type="submit">Crear Platillo</button>
    </form>
  </section>

  <section class="platillos-list">
    <h2>Lista de Platillos</h2>
    <ul id="platillo-list">
      <!-- Aquí se mostrarán los platillos -->
    </ul>
  </section>
</main>

<script>
  // URL base de tu backend
  const API_URL = 'http://localhost:8080/platillos';

  // Función para obtener la lista de platillos desde el backend
  async function getPlatillos() {
      const response = await fetch(API_URL);
      const platillos = await response.json();

      const platilloList = document.getElementById('platillo-list');
      platilloList.innerHTML = '';

      platillos.forEach(platillo => {
          const li = document.createElement('li');
          li.innerHTML = `
              <strong>${platillo.name}</strong>
              <p>Precio: $${platillo.price}</p>
              <p>Cantidad: ${platillo.cant}</p>
              <p>Ingredientes: ${platillo.ingredietns.join(', ')}</p>
              <button class="edit" onclick="editPlatillo('${platillo.id}')">Editar</button>
              <button class="delete" onclick="deletePlatillo('${platillo.id}')">Eliminar</button>
          `;
          platilloList.appendChild(li);
      });
  }

  // Función para crear un nuevo platillo
  document.getElementById('create-form').addEventListener('submit', async (event) => {
      event.preventDefault();

      const platillo = {
          name: document.getElementById('name').value,
          price: parseFloat(document.getElementById('price').value),
          cant: document.getElementById('cant').value,
          ingredietns: document.getElementById('ingredients').value.split(',').map(ingredient => ingredient.trim())
      };

      const response = await fetch(API_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(platillo)
      });

      if (response.ok) {
          getPlatillos();  // Actualiza la lista de platillos
          document.getElementById('create-form').reset();  // Limpia el formulario
      } else {
          alert('Error al crear el platillo');
      }
  });

  // Función para editar un platillo (puedes agregar un formulario similar para editar)
  function editPlatillo(id) {
      alert('Función de editar aún no implementada para el platillo con ID: ' + id);
  }

  // Función para eliminar un platillo
  async function deletePlatillo(id) {
      const response = await fetch(`${API_URL}/${id}`, { method: 'DELETE' });

      if (response.ok) {
          getPlatillos();  // Actualiza la lista de platillos
      } else {
          alert('Error al eliminar el platillo');
      }
  }

  // Inicializa la lista de platillos al cargar la página
  getPlatillos();
</script>
</body>
</html>
